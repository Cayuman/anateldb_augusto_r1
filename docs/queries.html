---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "queries.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: queries.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">STEL</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">IF OBJECT_ID(&#39;tempDB..##faixas&#39;,&#39;U&#39;) is not null </span>
<span class="s2">drop table ##faixas </span>
<span class="s2">create table ##faixas (id int not null, faixa varchar(20), inic float, fim float,); </span>
<span class="s2">insert into ##faixas values(0,&#39;De 20 MHz - 6 GHz&#39;,&#39;20000&#39;, &#39;6000000&#39;); </span>

<span class="s2">select distinct </span>
<span class="s2">f.MedTransmissaoInicial as &#39;Frequência&#39;,</span>
<span class="s2">uf.SiglaUnidadeFrequencia as &#39;Unidade&#39;,</span>
<span class="s2">e.MedLatitudeDecimal as &#39;Latitude&#39;,</span>
<span class="s2">e.MedLongitudeDecimal as &#39;Longitude&#39;,</span>
<span class="s2">e.NumServico as &#39;Número do Serviço&#39;,</span>
<span class="s2">e.NumEstacao as &#39;Número da estação&#39;,</span>
<span class="s2">ent.NomeEntidade as &#39;Entidade&#39;,</span>
<span class="s2">mu.NomeMunicipio as &#39;Município&#39;, </span>
<span class="s2">e.SiglaUf as &#39;UF&#39;,</span>
<span class="s2">ent.NumCnpjCpf as &#39;CNPJ&#39;,</span>
<span class="s2">h.NumFistel as &#39;Fistel&#39;</span>
<span class="s2">from contrato c</span>
<span class="s2">inner join estacao e on e.IdtContrato = c.Idtcontrato</span>
<span class="s2">inner join frequencia f on f.IdtEstacao = e.IdtEstacao</span>
<span class="s2">inner join HABILITACAO h on h.IdtHabilitacao = c.IdtHabilitacao </span>
<span class="s2">inner join entidade ent on ent.IdtEntidade = h.IdtEntidade </span>
<span class="s2">inner join endereco en on en.IdtEstacao = e.IdtEstacao </span>
<span class="s2">inner join Municipio mu on mu.CodMunicipio = en.CodMunicipio </span>
<span class="s2">inner join Servico s on s.NumServico = h.NumServico and s.IdtServicoAreaAtendimento = 4</span>
<span class="s2">left join UnidadeFrequencia uf on uf.IdtUnidadeFrequencia = f.IdtUnidadeTransmissao</span>
<span class="s2">left outer join ##faixas fx on (</span>
<span class="s2">	(fx.inic &lt;= f.MedRecepcaoInicialKHz and fx.fim &gt;= f.MedRecepcaoInicialKHz) </span>
<span class="s2">	or (fx.inic &lt;= f.MedTransmissaoInicialKHz and fx.fim &gt;= f.medtransmissaoinicialkhz)</span>
<span class="s2">	or (fx.inic &lt;= f.MedFrequenciaInicialKHz and fx.fim &gt;= f.MedFrequenciaInicialKHz)</span>
<span class="s2">	or (fx.inic &lt;= f.MedFrequenciaFinalKHz and fx.fim &gt;= f.MedFrequenciaFinalKHz)</span>
<span class="s2">	) </span>
<span class="s2">where e.DataExclusao is null and </span>
<span class="s2">fx.faixa is not null and</span>
<span class="s2">f.MedTransmissaoInicial is not null</span>
<span class="s2">and h.NumServico &lt;&gt; &#39;010&#39;</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="download_mosaico" class="doc_header"><code>download_mosaico</code><a href="https://github.com/ronaldokun/anatelspyder/tree/master/anatelspyder/query.py#L37" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>download_mosaico</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbdev.export</span> <span class="k">import</span> <span class="n">notebook2script</span><span class="p">;</span> <span class="n">notebook2script</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Converted 00_core.ipynb.
Converted index.ipynb.
Converted process.ipynb.
Converted queries.ipynb.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

